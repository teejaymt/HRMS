# HRMS Application - Saudi Arabia Compliance Complete

## System Status
 Backend Server: Running on http://localhost:3000
 Frontend Server: Running on http://localhost:3001
 Database: SQLite with Saudi-compliant schema
 Admin User: admin@hrms.com / admin123

## Saudi Arabia Labor Law Compliance Features

### 1. Employee Management
**New Fields:**
- Arabic Names (firstNameArabic, lastNameArabic, positionArabic)
- Saudi ID (saudiId) for Saudi nationals
- Iqama Number & Expiry Date (iqamaNumber, iqamaExpiryDate) for expatriates
- GOSI Number (gosiNumber)
- isSaudi checkbox for nationality tracking
- Contract Types: LIMITED, UNLIMITED, SEASONAL, TASK_BASED
- Saudi Allowances: Housing, Transport, Food allowances (SAR)

**UI Updates:**
- Comprehensive employee form with sections:
  - Basic Information (English & Arabic)
  - Employment Details
  - Saudi/Expat Information
  - Compensation (SAR)
- Saudi national indicator (سعودي) in employee list
- Contract type badges
- Conditional fields based on Saudi/Expat selection

### 2. Department Management
**New Fields:**
- Arabic Department Name (nameArabic)
- Saudi Employee Count (saudiCount)
- Non-Saudi Employee Count (nonSaudiCount)
- Nitaqat Percentage Calculation

**UI Updates:**
- Nitaqat compliance tracking with color-coded percentages:
  - Green: 50% (Excellent)
  - Yellow: 30-49% (Acceptable)
  - Red: <30% (Below Target)
- Real-time Saudization ratio display
- Department cards showing Saudi vs Non-Saudi breakdown

### 3. Leave Management
**Saudi Leave Types:**
- ANNUAL: 21 days/year minimum
- SICK: 30 days full pay + 60 days at 75%
- HAJJ: One-time 10 days
- MATERNITY: 70 days full pay
- PATERNITY: 3 days
- MARRIAGE: 5 days
- DEATH/Bereavement: 5 days
- UNPAID: As approved
- STUDY: As approved

**UI Updates:**
- Color-coded leave type badges
- Entitlement information displayed when selecting leave type
- Support for all Saudi labor law leave types
- Leave balance tracking

### 4. Payroll Management
**New Fields:**
- Gross Salary (basicSalary + all allowances + bonuses)
- Total Deductions (GOSI + other deductions + tax)
- Net Salary (grossSalary - totalDeductions)
- Saudi Allowances breakdown:
  - Housing Allowance
  - Transport Allowance
  - Food Allowance
  - Other Allowances
- GOSI Contributions:
  - Employee Share (9.75%)
  - Employer Share (12.5%)

**UI Updates:**
- Auto-population of employee salary and allowances
- Real-time gross/net salary calculation
- GOSI contribution fields
- Comprehensive payroll summary display
- SAR currency throughout
- Improved status tracking (PENDING, PROCESSED, PAID)

## Database Schema Highlights

### Employee Model
- 50+ fields covering all Saudi labor law requirements
- Hijri calendar support (joinDateHijri, birthDateHijri, etc.)
- EOSB (End of Service Benefits) tracking
- Contract type with probation period support (90 days)
- Annual leave entitlement (21 days minimum)
- Hajj leave tracking (one-time usage)

### Department Model
- Nitaqat compliance with saudiCount/nonSaudiCount
- Support for Arabic names

### Leave Model
- 9 leave types compliant with Saudi law
- Days calculation
- Approval workflow

### Payroll Model
- Complete salary breakdown
- GOSI integration
- Saudi allowances tracking
- Payroll status management

### Additional Models (Backend)
- Violation: Disciplinary tracking
- Document: Saudi ID, Iqama, Passport, Visa, Work Permit, GOSI Certificate
- PublicHoliday: Saudi national and religious holidays with Hijri dates
- Performance: Employee performance tracking

## API Endpoints

All existing endpoints now support Saudi-compliant fields:

**Auth:**
- POST /auth/register
- POST /auth/login
- GET /auth/users

**Employees:**
- POST /employees (with Saudi fields)
- GET /employees (with search)
- GET /employees/:id
- PATCH /employees/:id
- DELETE /employees/:id
- GET /employees/stats

**Departments:**
- POST /departments (with Nitaqat fields)
- GET /departments
- GET /departments/:id
- PATCH /departments/:id
- DELETE /departments/:id

**Leaves:**
- POST /leaves (with Saudi leave types)
- GET /leaves
- GET /leaves/:id
- PATCH /leaves/:id/approve
- PATCH /leaves/:id/reject

**Payroll:**
- POST /payroll (with gross/net/deductions)
- GET /payroll
- GET /payroll/:id
- PATCH /payroll/:id/paid

**Attendance:**
- POST /attendance/check-in
- POST /attendance/check-out
- GET /attendance

## Next Steps for Full Compliance

1. **GOSI Integration:**
   - Implement automatic GOSI calculation (9.75% employee, 12.5% employer)
   - GOSI contribution reports
   - GOSI certificate management

2. **EOSB Calculation:**
   - Automatic calculation based on service years
   - Half-month salary for first 5 years
   - Full-month salary for years after 5

3. **Hijri Calendar:**
   - Automatic Gregorian to Hijri conversion
   - Display both calendars in UI
   - Hijri date pickers

4. **Reports:**
   - Nitaqat compliance reports
   - GOSI contribution reports
   - WPS (Wage Protection System) export
   - EOSB calculation reports

5. **Document Management:**
   - Upload Saudi IDs, Iqamas, work permits
   - Expiry notifications
   - Document verification

6. **Public Holidays:**
   - Saudi national holidays calendar
   - Islamic holidays (Eid al-Fitr, Eid al-Adha, National Day)
   - Automatic holiday calculation

7. **Violation Tracking:**
   - Warning system
   - Disciplinary action workflow
   - Violation history

8. **Advanced Features:**
   - Overtime calculation (150% as per law)
   - Weekend tracking (Friday/Saturday)
   - Work permit tracking
   - Visa expiry alerts

## Accessing the Application

1. Open browser: http://localhost:3001
2. Login with: admin@hrms.com / admin123
3. Navigate to any module to see Saudi-compliant forms

## Technology Stack

**Backend:**
- NestJS 11.0.1
- Prisma 7.2.0
- SQLite with LibSQL adapter
- bcrypt, JWT
- TypeScript

**Frontend:**
- Next.js 16.1.1 (Turbopack)
- TypeScript
- Tailwind CSS
- Heroicons

**Database:**
- SQLite at D:\HRMS\hrms-backend\dev.db
- Full Saudi labor law schema

## Migration Information

Migration: 20260103183423_saudi_compliance
Status: Applied successfully
Location: D:\HRMS\hrms-backend\prisma\migrations\

---
Generated: January 3, 2026
System Version: 1.0.0 (Saudi Compliant)
